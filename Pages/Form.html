<!DOCTYPE html>
<html lang="en">

<head>
  <base target="_top" />
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />

  <title>Metropolitan Richmond Artists Association</title>
  <?!= include("Includes/css/global"); ?>
</head>

<body id='page' data-evt='<?= evt ?>' data-title='<?= title = getTitleById(evt);?>'>
  <?!= include("Includes/html/header"); ?>
  <div class="content" id="main">
    <div class="container mraa-container pt-3">
      <h1 class="mraa-header"><?= title ?></h1>
      <h2 class="mraa-sub-header"><?= getSubTitleById(evt); ?></h2>

      <div id="aboutSection" class="mraa-callout mraa-callout-primary">
        <div class="row">
          <div class="col-6">
            <p>
              <?= getStartById(evt); ?>
            </p>
          </div>
          <div class="col-6">
            <p>Event Contact: <a href="mailto:<?= getContactEmailById(evt); ?>"> <?= getContactNameById(evt); ?> </a>
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <p>Meeting Location: <strong><?= getLocationById(evt); ?></strong> </p>
          </div>
        </div>
        <div class="row">
          <div class="col-12 small">
            <? 
              let description = getDescriptionById(evt); 
              description.forEach(function(r){
            ?>
            <p>
              <?= r ?>
            </p>
            <? }) ?>
          </div>
          <div class="col-12 small">
            <h3>
              Event Details
            </h3>
            <ul>
              <? 
              let details = getDetailsById(evt); 
              details.forEach(function(r){
            ?>
              <? if (r === "") { ?>
              <p></p>
              <? } else { ?>
              <li>
                <?= r ?>
              </li>
              <? } ?>
              <? }) ?>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <h5>Seating Limit: <span class="badge badge-primary p-2"><?= getMaxById(evt); ?></span></h5>
          </div>
          <div class="col-4">
            <h5>Seats Available: <span class="badge badge-primary p-2">
                <? 
              let c = getCountById(evt);
              let avail = getMaxById(evt) - c 
              ?>
                <?= avail>=0?avail:0 ?>
              </span></h5>
          </div>
          <div class="col-4">
            <h5>Total Signed Up: <span class="badge badge-primary p-2"><?= c ?></span></h5>
          </div>

        </div>

        <div class="row">
          <div class="col-12">
            <h5 id="eventStatusMessage" class="mt-3"></h5>
          </div>
        </div>
      </div>
      <h5 class="text-right">* <span class="badge badge-secondary">Required</span></h5>

      <form id="frmMain">
        <div class="form-group">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text">First Name *</span>
            </div>
            <input type="text" class="form-control" id="firstName" aria-label="First Name" required />
            <div class="invalid-feedback">First name is required</div>
            <div class="input-group-prepend ml-3">
              <span class="input-group-text">Last Name *</span>
            </div>
            <input type="text" class="form-control" id="lastName" aria-label="Last Name" required />
            <div class="invalid-feedback">Last name is required</div>
          </div>
        </div>

        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text">Email *</span>
          </div>
          <input type="email" class="form-control" id="emailAddress" aria-label="Email"
            placeholder="Enter a valid email address" required />
          <div class="input-group-prepend ml-3">
            <span class="input-group-text">Phone</span>
          </div>
          <input type="tel" class="form-control" id="phoneNumber" aria-label="Phone"
            placeholder="Requested format 999 999-9999" />
        </div>

        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Questions</span>
          </div>
          <textarea class="form-control" aria-label="Questions" id="question"></textarea>
        </div>

        <div class="row mb-3">
          <div class="col-12">
            <!-- Buttons -->
            <hr>
            <div>
              <button class="btn btn-primary mraa-button-primary mr-3" id="btnSave">Send to MRAA</button>
            </div>
          </div>
        </div>

      </form>

      <div id="messageAlert" class="alert alert-success mt-4 mraa-alert" role="alert" style="display: none;">
        <h4 class="alert-heading">Save Successful</h4>
        <p id="messageContent"></p>
        <hr>
        <p class="mb-0" id="messageFooter"></p>
      </div>
    </div>

  </div>
  <div id="loading" class="loading pt-5" style="display: none;">
    <div class="d-flex justify-content-center">
      <div>
        <div class="spinner-border mt-5" role="status" style="width: 4rem; height: 4rem;">
          <span class="sr-only">Saving...</span>
        </div>

      </div>
    </div>
    <div class="pt-3 text-center">Saving...</div>
  </div>

  <?!= include("Includes/html/thankyou"); ?>

  <?!= include("Includes/html/footer"); ?>
  <?!= include("Includes/scripts/global"); ?>
  <?!= include("Includes/scripts/form"); ?>
</body>

</html>